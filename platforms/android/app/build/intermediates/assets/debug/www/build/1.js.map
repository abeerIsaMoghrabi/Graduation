{"version":3,"sources":["../../src/pages/viewer/viewer.module.ts","../../src/pages/viewer/viewer.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ViewerPage } from './viewer';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ViewerPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ViewerPage),\r\n  ],\r\n})\r\nexport class ViewerPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/viewer/viewer.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams,LoadingController, ActionSheetController, ToastController, Platform, Loading} from 'ionic-angular';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera';\r\n\r\n\r\nimport { File } from '@ionic-native/file';\r\nimport { Transfer, TransferObject } from '@ionic-native/transfer';\r\nimport { FilePath } from '@ionic-native/file-path';\r\n\r\n\r\nimport { storage } from 'firebase';\r\nimport * as firebase from 'firebase/app';\r\n/**\r\n * Generated class for the ViewerPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\ndeclare var cordova: any;\r\n@IonicPage()\r\n\r\n@Component({\r\n  selector: 'page-viewer',\r\n  templateUrl: 'viewer.html',\r\n})\r\nexport class ViewerPage {\r\n\r\n\t// public base64Image: string;\r\n //    mySelectedPhoto;\r\n //    loading;\r\n //    currentPhoto;\r\n  lastImage: string = null;\r\n    loading: Loading\r\n    ver:string;\r\n\r\n  // constructor(public camera: Camera,public navCtrl: NavController, public navParams: NavParams ,public loadingCtrl: LoadingController) {\r\n  constructor(public navCtrl: NavController, private camera: Camera, private transfer: Transfer, private file: File, private filePath: FilePath, public actionSheetCtrl: ActionSheetController, public toastCtrl: ToastController, public platform: Platform, public loadingCtrl: LoadingController){\r\n\r\n\r\n this.loadScript ();\r\n\r\n  }\r\n\r\n\r\n public presentActionSheet() {\r\n        let actionSheet = this.actionSheetCtrl.create({\r\n            title: 'Select Image Source',\r\n            buttons: [\r\n                {\r\n                    text: 'Load from Library',\r\n                    handler: () => {\r\n                        this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY);\r\n                    }\r\n                },\r\n                {\r\n                    text: 'Use Camera',\r\n                    handler: () => {\r\n                        this.takePicture(this.camera.PictureSourceType.CAMERA);\r\n                    }\r\n                },\r\n                {\r\n                    text: 'Cancel',\r\n                    role: 'cancel'\r\n                }\r\n            ]\r\n        });\r\n        actionSheet.present();\r\n    }\r\n    public takePicture(sourceType) {\r\n        // Create options for the Camera Dialog\r\n        var options = {\r\n            quality: 100,\r\n            sourceType: sourceType,\r\n            saveToPhotoAlbum: false,\r\n            correctOrientation: true\r\n        };\r\n\r\n        // Get the data of an image\r\n        this.camera.getPicture(options).then((imagePath) => {\r\n            // Special handling for Android library\r\n            if (this.platform.is('android') && sourceType === this.camera.PictureSourceType.PHOTOLIBRARY) {\r\n                this.filePath.resolveNativePath(imagePath)\r\n                    .then(filePath => {\r\n                        let correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);\r\n                        let currentName = imagePath.substring(imagePath.lastIndexOf('/') + 1, imagePath.lastIndexOf('?'));\r\n                        this.copyFileToLocalDir(correctPath, currentName, this.createFileName());\r\n                        this.presentToast(this.lastImage);\r\n                    });\r\n            } else {\r\n                var currentName = imagePath.substr(imagePath.lastIndexOf('/') + 1);\r\n                var correctPath = imagePath.substr(0, imagePath.lastIndexOf('/') + 1);\r\n                this.copyFileToLocalDir(correctPath, currentName, this.createFileName());\r\n                this.presentToast(this.lastImage);\r\n            }\r\n        }, (err) => {\r\n            this.presentToast('Error while selecting image.');\r\n        });\r\n    }\r\n    // Create a new name for the image\r\n    private createFileName() {\r\n        var d = new Date(),\r\n            n = d.getTime(),\r\n            newFileName =  n + \".jpg\";\r\n        return newFileName;\r\n    }\r\n\r\n// Copy the image to a local folder\r\n    private copyFileToLocalDir(namePath, currentName, newFileName) {\r\n        this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(success => {\r\n            this.lastImage = newFileName;\r\n        }, error => {\r\n            this.presentToast('Error while storing file.');\r\n        });\r\n    }\r\n\r\n    private presentToast(text) {\r\n        let toast = this.toastCtrl.create({\r\n            message: text,\r\n            duration: 3000,\r\n            position: 'top'\r\n        });\r\n        toast.present();\r\n    }\r\n\r\n// Always get the accurate path to your apps folder\r\n    public pathForImage(img) {\r\n        if (img === null) {\r\n            return '';\r\n        } else {\r\n            // this.presentToast(\"cordova.file.dataDirectory\" + img);\r\n            return cordova.file.dataDirectory + img;\r\n               \r\n        }\r\n    }\r\n\r\n\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ViewerPage');\r\n  }\r\n\r\n//   takePhoto(){\r\n\r\n//   const options: CameraOptions = {\r\n//     quality: 100,\r\n//     targetHeight: 200,\r\n//     targetWidth: 200,\r\n//     destinationType: this.camera.DestinationType.DATA_URL,\r\n//     encodingType: this.camera.EncodingType.JPEG,\r\n//     mediaType: this.camera.MediaType.PICTURE\r\n//   }\r\n\r\n\r\n//  this.camera.getPicture(options).then((imageData) => {\r\n//  this.loading = this.loadingCtrl.create({\r\n//  content:\"Taking photo wait ....\"\r\n//  });\r\n//  this.loading.present();\r\n//  this.mySelectedPhoto =\r\n//  this.dataURLtoBlob('data:image/jpeg;base64,' + imageData);\r\n//  this.upload();\r\n\r\n// }, (err) => {\r\n//  // Handle error\r\n// });\r\n\r\n//   }\r\n\r\n//    dataURLtoBlob(myURL){\r\n//       let binary = atob(myURL.split(',')[1]);\r\n//   let array = [];\r\n//   for (let i = 0 ; i < binary.length;i++){\r\n//       array.push(binary.charCodeAt(i));\r\n//   }\r\n//       return new Blob([new Uint8Array(array)],{type:'image/jpeg'});\r\n//   }\r\n\r\n//   upload(){\r\n//   if(this.mySelectedPhoto){\r\n//       var uploadTask = firebase.storage().ref().child('images/myphoto.jpg').put(this.mySelectedPhoto);\r\n//       uploadTask.then(this.onSuccess,this.onErrors);\r\n//   }\r\n//   }\r\n\r\n//   onSuccess=(snapshot)=>{\r\n//       this.currentPhoto = snapshot.downloadURL;\r\n//       this.loading.dismiss();\r\n//   }\r\n\r\n//   onErrors=(error)=>{\r\n//       console.log(error);\r\n//       this.loading.dismiss();\r\n//   }\r\n\r\n  loadScript () { var script = document.createElement('script');\r\n   script.type = 'text/javascript'; \r\n   script.src = 'assets/js/api.js'; \r\n   document.body.appendChild(script); }\r\n\r\n   \r\n\r\n  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/viewer/viewer.ts"],"sourceRoot":""}